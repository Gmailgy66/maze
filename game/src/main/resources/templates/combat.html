<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Open Combat</title>
    <link rel="stylesheet" th:href="@{/combat.css}">
</head>

<body>
    <script th:src="@{/combat.js}"></script>
    <div class="container">
        <h1>🦖 Boss 战斗系统 ⚔️</h1>

        <!-- File Upload Section -->
        <div class="section upload-section">
            <h3>📁 上传战斗配置</h3>
            <form id="boss-upload-form" enctype="multipart/form-data">
                <div class="file-input-wrapper">
                    <input type="file" id="bossFile" accept=".json,.txt" onchange="onBossFileSelected(event)">
                    <label for="bossFile" class="file-label">选择Boss配置文件</label>
                    <span id="file-name" class="file-name"></span>
                </div>
                <button type="button" onclick="uploadBossFile()" id="upload-btn" disabled>上传配置</button>
                <button type="button" onclick="useDefaultBoss()" class="default-btn">使用默认配置</button>
            </form>
        </div>

        <!-- Boss Status Section -->
        <div class="section">
            <h3>🦖 Boss 血量状态</h3>
            <div id="boss-status" class="status-grid"></div>
        </div>

        <!-- Player Skills Section -->
        <div class="section">
            <h3>⚔️ 玩家技能</h3>
            <div id="skill-status" class="skill-grid"></div>
        </div>

        <!-- Combat Actions Section -->
        <div class="section">
            <h3>🎯 战斗序列</h3>
            <div id="skill-sequence" class="action-sequence"></div>
        </div>

        <!-- Combat Controls -->
        <div class="section controls-section">
            <div class="button-group">
                <button id="start" onclick="startCombat()" class="btn-primary">🚀 开始战斗</button>
                <button id="next-turn" onclick="handleNextTurn()" class="btn-secondary" hidden>⏭️ 下一回合</button>
                <button id="auto-play" onclick="toggleAutoPlay()" class="btn-info" hidden>▶️ 自动播放</button>
                <button id="restart" onclick="restartCombat()" class="btn-warning" hidden>🔄 重新开始</button>
                <button id="exit" onclick="exitCombat()" class="btn-danger" hidden>🚪 退出战斗</button>
            </div>

            <!-- Auto-Play Speed Controls -->
            <div id="auto-controls" class="auto-controls" hidden>
                <h4>⚡ 自动播放控制</h4>
                <div class="speed-control">
                    <label for="speed-slider" id="speed-label">速度: 正常 (1500ms)</label>
                    <input type="range" id="speed-slider" min="100" max="3000" step="100" value="1500"
                        onchange="setAutoPlaySpeed(this.value); updateSpeedDisplay()">
                    <div class="speed-labels">
                        <span>极快 (100ms)</span>
                        <span>极慢 (3000ms)</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Combat Stats -->
        <div class="section stats-section" id="combat-stats" hidden>
            <h3>📊 战斗统计</h3>
            <div class="stats-grid">
                <div class="stat-item">
                    <span class="stat-label">当前回合:</span>
                    <span id="current-turn">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">已击败Boss:</span>
                    <span id="defeated-bosses">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">剩余Boss:</span>
                    <span id="remaining-bosses">0</span>
                </div>
            </div>
        </div>
    </div>
</body>

</html>